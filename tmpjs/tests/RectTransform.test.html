<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>RectTransform Test</title>
    <style>
        * { padding: 0; margin:0; position: relative; background-color: black;color:white;overflow: hidden;}
        img { background-color: transparent!important;}
    </style>
<script type="text/javascript" src="/tmpjs/utils.js"></script>
<script type="text/javascript" src="/tmpjs/types.js"></script>
<script type="text/javascript" src="/tmpjs/Components/Component.js"></script>
<script type="text/javascript" src="/tmpjs/Components/Border.js"></script>
<script type="text/javascript" src="/tmpjs/Components/RectTransform.js"></script>
<script type="text/javascript" src="/tmpjs/Objects/SimObject.js"></script>
<script type="text/javascript" src="/tmpjs/Objects/DomObject.js"></script>
<script type="text/javascript" src="/tmpjs/Objects/BodyObject.js"></script>
<script type="text/javascript" src="/tmpjs/Objects/DivObject.js"></script>

<script>
    var obj = undefined
    function TL(btn) { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setTopLeft(); obj.render(); refreshCtrls() }
    function T(btn)  { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setTop(); obj.render(); refreshCtrls() }
    function TR(btn) { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setTopRight(); obj.render(); refreshCtrls() }
    function TS(btn) { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setTopStretch(); obj.render(); refreshCtrls() }
    function CL(btn) { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setCenterLeft(); obj.render(); refreshCtrls() }
    function C(btn)  { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setCenter(); obj.render(); refreshCtrls() }
    function CR(btn) { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setCenterRight(); obj.render(); refreshCtrls() }
    function CS(btn) { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setCenterStretch(); obj.render(); refreshCtrls() }
    function BL(btn) { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setBottomLeft(); obj.render(); refreshCtrls() }
    function B(btn)  { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setBottom(); obj.render(); refreshCtrls() }
    function BR(btn) { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setBottomRight(); obj.render(); refreshCtrls() }
    function BS(btn) { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setBottomStretch(); obj.render(); refreshCtrls() }
    function SL(btn) { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setStretchLeft(); obj.render(); refreshCtrls() }
    function SC(btn) { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setStretchCenter(); obj.render(); refreshCtrls() }
    function SR(btn) { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setStretchRight(); obj.render(); refreshCtrls() }
    function S(btn)  { setBtnTransparent(); btn.style.backgroundColor = "aquamarine"; obj.getComponent('RectTransform').setStretch(); obj.render(); refreshCtrls() }
    function init(){
        //let jsBody = '{"className":"BodyObject","guid":"d2068636-b443-4fd5-8e3d-ea7b23350cf9","name":"","components":[],"children":[]}'
        let UI = new BodyObject()

        obj = UI.addChild(new DivObject())
        r = obj.getComponent('RectTransform')
        r.setTopLeft()
        obj.render()
        refreshCtrls()
    }

    function setBtnTransparent(){
        btns = document.getElementsByClassName("APBtn")
        console.log(btns)
        for (let ii=0; ii<btns.length;ii++) {
            btns[ii].style.backgroundColor ="transparent"
        }
    }
    function setInputValue(elt,val) {
        let e = document.getElementById(elt)
        e.setAttribute("value",val)
        e.value = val
    }

    function getInputValue(elt) {
        return document.getElementById(elt).value
    }

    function refreshCtrls() {
        r = obj.getComponent("RectTransform")
        setInputValue("position.x",         r.rect.left)
        setInputValue("position.y",         r.rect.top)
        setInputValue("size.x",             r.rect.right)
        setInputValue("size.y",             r.rect.bottom)
        setInputValue("horizontalAnchor.x", r.horizontalAnchor.x)
        setInputValue("horizontalAnchor.y", r.horizontalAnchor.y)
        setInputValue("verticalAnchor.x",   r.verticalAnchor.x)
        setInputValue("verticalAnchor.y",   r.verticalAnchor.y)
        refreshComp()
    }

    function refreshComp() {
        r = obj.getComponent("RectTransform")
        console.log(getInputValue("position.x"))
        r.rect.left = getInputValue("position.x")
        r.rect.top = getInputValue("position.y")
        r.rect.right = getInputValue("size.x")
        r.rect.bottom = getInputValue("size.y")
        r.horizontalAnchor.x = getInputValue("horizontalAnchor.x")
        r.horizontalAnchor.y = getInputValue("horizontalAnchor.y")
        r.verticalAnchor.x = getInputValue("verticalAnchor.x")
        r.verticalAnchor.y = getInputValue("verticalAnchor.y")
        r.pivot.x = getInputValue("pivot.x")
        r.pivot.y = getInputValue("pivot.y")
        r.scale.x = getInputValue("scale.x")
        r.scale.y = getInputValue("scale.y")
        r.rotation = getInputValue("rotation")
        obj.render()
    }
</script>
</head>

<body onLoad="init();">
    <div></div>
    <div style="width:200px;margin-left: auto; top:200px;margin-right: 15px;z-index: 99;">
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="TL(this);"><img src="../../assets/RectTransform/TL.png"/></button>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="T(this);" ><img src="../../assets/RectTransform/T.png" /></button>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="TR(this);"><img src="../../assets/RectTransform/TR.png"/></button>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="TS(this);"><img src="../../assets/RectTransform/TS.png"/></button><br/>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="CL(this);"><img src="../../assets/RectTransform/CL.png"/></button>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="C(this);" ><img src="../../assets/RectTransform/C.png" /></button>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="CR(this);"><img src="../../assets/RectTransform/CR.png"/></button>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="CS(this);"><img src="../../assets/RectTransform/CS.png"/></button><br/>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="BL(this);"><img src="../../assets/RectTransform/BL.png"/></button>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="B(this);" ><img src="../../assets/RectTransform/B.png" /></button>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="BR(this);"><img src="../../assets/RectTransform/BR.png"/></button>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="BS(this);"><img src="../../assets/RectTransform/BS.png"/></button><br/>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="SL(this);"><img src="../../assets/RectTransform/SL.png"/></button>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="SC(this);"><img src="../../assets/RectTransform/SC.png"/></button>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="SR(this);"><img src="../../assets/RectTransform/SR.png"/></button>
        <button class="APBtn" style="width:45px;height:45px;border:none;background-color: transparent;" onClick="S(this);" ><img src="../../assets/RectTransform/S.png" /></button>
        <hr/>
        <span style="font-family: Arial, Helvetica, sans-serif;width: 90px;display: inline-block;text-align: right;">Position : </span>
        <input type="text" id="position.x" style="width: 32px;text-align: right;" value="0" onkeyup="refreshComp();" />
        <input type="text" id="position.y" style="width: 32px;text-align: right;" value="0" onkeyup="refreshComp();" /><br/>

        <span style="font-family: Arial, Helvetica, sans-serif;width: 90px;display: inline-block;text-align: right;">Size : </span>
        <input type="text" id="size.x" style="width: 32px;text-align: right;" value="0" onkeyup="refreshComp();"/>
        <input type="text" id="size.y" style="width: 32px;text-align: right;" value="0" onkeyup="refreshComp();"/><hr/>

        <span style="font-family: Arial, Helvetica, sans-serif;width: 90px;display: inline-block;text-align: right;">Horizontal : </span>
        <input type="text" id="horizontalAnchor.x" style="width: 32px;text-align: right;" value="0" onkeyup="refreshComp();"/>
        <input type="text" id="horizontalAnchor.y" style="width: 32px;text-align: right;" value="0" onkeyup="refreshComp();"/><br/>

        <span style="font-family: Arial, Helvetica, sans-serif;width: 90px;display: inline-block;text-align: right;">Vertical : </span>
        <input type="text" id="verticalAnchor.x" style="width: 32px;text-align: right;" value="0" onkeyup="refreshComp();"/>
        <input type="text" id="verticalAnchor.y" style="width: 32px;text-align: right;" value="0" onkeyup="refreshComp();"/><hr/>

        <span style="font-family: Arial, Helvetica, sans-serif;width: 90px;display: inline-block;text-align: right;">Pivot : </span>
        <input type="text" id="pivot.x" style="width: 32px;text-align: right;" value="0" onkeyup="refreshComp();"/>
        <input type="text" id="pivot.y" style="width: 32px;text-align: right;" value="0" onkeyup="refreshComp();"/><br/>

        <span style="font-family: Arial, Helvetica, sans-serif;width: 90px;display: inline-block;text-align: right;">Rotation : </span>
        <input type="text" id="rotation" style="width: 32px;text-align: right;" value="0" onkeyup="refreshComp();"/><hr/>

        <span style="font-family: Arial, Helvetica, sans-serif;width: 90px;display: inline-block;text-align: right;">Scale : </span>
        <input type="text" id="scale.x" style="width: 32px;text-align: right;" value="1" onkeyup="refreshComp();"/>
        <input type="text" id="scale.y" style="width: 32px;text-align: right;" value="1" onkeyup="refreshComp();"/><br/>
    </div>
</body>
</html>